<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">

  <style>
    html { scroll-behavior: smooth; }
    body {
    margin: 0;
    background: url("pattern_background3.png") no-repeat center center scroll;
    background-size: 3000px;
       background-repeat: repeat-y; /* 배경 이미지 세로 방향으로 반복 */
  background-size: cover; /* 배경 이미지 크기 조정 */
  background-attachment: fixed; /* 배경 이미지 고정 */
  height: 100vh; /* 화면 높이에 맞게 배경이 꽉 차도록 설정 */
    background-color: #000; /* 배경 이미지 로딩 안될 경우 대비 */
    color: #fff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    text-align: center;
  }

  .overlay {
    background-color: rgba(0, 0, 0, 0.65);  /* 어둡고 투명한 블러 배경 */
    backdrop-filter: blur(2px);
    width: 100%;
    min-height: 100vh;
  }

  #connectWalletBtn:hover {
  transform: scale(1.15);
}

    #preorder-lockup-container {
    width: 80%; /* 이 값을 조정하여 섹션의 너비를 줄입니다 */
    margin: 0 auto; /* 콘텐츠를 중앙에 배치 */
}

    #Pre-sale NFT {
    width: 80%; /* 이 값을 조정하여 섹션의 너비를 줄입니다 */
    margin: 0 auto; /* 콘텐츠를 중앙에 배치 */
}

.navbar {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background-color: #000;
  z-index: 1000;
  padding: 12px 16px;
  box-shadow: 0 2px 8px rgba(255, 215, 0, 0.1);
}

    .navbar a { color: #ffd700; font-size: 14px; font-weight: 500; text-decoration: none; #buyBnbAmount,
transition: color 0.2s ease; }
    .navbar a:hover { color: #ffffff !important; }
    .navbar a.active { font-weight: 700; }
    header { padding: 140px 20px 20px; }
    .logo { width: 250px; margin-bottom: 20px; transition: transform 0.3s ease; }
    .logo:hover { transform: scale(1.05); }
    


  .slogan {
  font-family: 'Playfair Display', serif;
  font-size: 2.2vw;
  font-weight: 500;
  line-height: 1.6;
  color: #ffd700;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
  padding: 0 20px;
  max-width: 1200px;
  margin: 0 auto;
  animation: fadeInUp 1.5s ease-out both;
}


    
    @keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
    
#buyBnbAmount,
#preBnbAmount {
  max-width: 240px;
  margin: 0 auto 10px;
  display: block;
}
    .swap-box, .buy-box {
      background: #1c1c1c;
      margin: 30px auto;
      padding: 20px;
      width: 90%; max-width: 400px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.1);
    }
    .swap-box h3, .buy-box h3 { color: #ffd700; margin-bottom: 15px; }
    .swap-box input, .buy-box input {
      width: 100%; padding: 8px 10px;
      margin-bottom: 10px; font-size: 14px;
      height: 36px; border: none; border-radius: 6px;
    }



   .token-info-box {
  margin: 80px auto;
  padding: 20px;
  max-width: 400px; /* 최대 너비를 400px로 설정 */
  width: 100%; /* 화면에 따라 너비가 100%까지 늘어나도록 설정 */
  background: rgba(0, 0, 0, 0.4);
  border-radius: 24px;
  box-shadow: 0 0 30px rgba(255, 215, 0, 0.1);
  backdrop-filter: blur(8px);
  animation: fadeIn 1s ease-out;
  text-align: left;
}
    .token-card {
      background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
      border: 1px solid #333;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.1);
    }
    .token-row {
      display: flex; justify-content: space-between;
      padding: 12px 0; border-bottom: 1px solid #333;
    }
    .token-row:last-child { border-bottom: none; }
    .label { color: #aaa; font-weight: 500; }
    .value { color: #fff; font-weight: bold; }

  .presale-banner {
    margin-top: 100px;
    text-align: center;
    padding: 40px 20px;
  }

  .presale-badge {
    color: gold;
    font-weight: 600;
    font-size: 1.2rem;
    letter-spacing: 1px;
    margin-bottom: 10px;
  }

  .presale-headline {
    font-size: 2.5rem;
    font-weight: bold;
    margin-bottom: 10px;
    color: #f0c420;
  }

  .presale-tagline {
    font-size: 1rem;
    color: #ccc;
    margin-bottom: 20px;
  }

  .presale-countdown {
    font-size: 1.5rem;
    font-weight: bold;
    color: #00ffc8;
    background-color: #222;
    padding: 10px 20px;
    border-radius: 10px;
    display: inline-block;
    margin-top: 10px;
  }

   {
    .presale-headline { font-size: 1.8rem; }
    .presale-countdown { font-size: 1.2rem; }
  }

    @media (max-width: 768px)
{
    .presale-headline { font-size: 1.8rem; }
    .presale-countdown { font-size: 1.2rem; }
  }
 {
      header { padding-top: 180px; }
        
      .slogan { font-size: 15px; }
      h3 { font-size: 16px; }
      .navbar a { font-size: 13px; }
      .swap-box, .buy-box { width: 90%; max-width: 90%; box-sizing: border-box; }
      .navbar { flex-direction: column; gap: 12px; }
      .slogan { font-size: 16px; }
      .swap-box input, .buy-box input { padding: 6px 8px; font-size: 13px; height: 32px; }
      .swap-box, .buy-box  {
  background: #1c1c1c;
  margin: 30px auto;
  padding: 20px;
  width: 90%; max-width: 400px;
  border-radius: 12px;
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.1);
  border: 2px solid #ffd700; /* ← 이 줄을 추가하세요 */
}
     .token-info-box {
  margin: 80px auto;
  padding: 20px;
  max-width: 640px;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 24px;
  box-shadow: 0 0 30px rgba(255, 215, 0, 0.1);
  backdrop-filter: blur(8px);
  animation: fadeIn 1s ease-out;
  text-align: left;
}

.token-info-box h2 {
  color: #ffd700;
  font-size: 28px;
  margin-bottom: 20px;
  text-align: center;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
}

.token-card {
  background: linear-gradient(135deg, #121212, #1a1a1a);
  border-radius: 20px;
  padding: 24px;
  box-shadow: 0 0 12px rgba(255, 255, 255, 0.05);
}

.token-row {
  display: flex;
  justify-content: space-between;
  padding: 14px 0;
  border-bottom: 1px solid #333;
}

.token-row:last-child {
  border-bottom: none;
}

.label {
  color: #aaa;
  font-weight: 500;
}

.value {
  color: #fff;
  font-weight: bold;
}

.unit {
  font-size: 14px;
  color: #ffd700;
  margin-left: 6px;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
    }
    #preBuyButton {
  background: linear-gradient(145deg, #ffd700, #ffb700);
  color: #000;
  font-size: 16px;
  font-weight: bold;
  padding: 12px 24px;
  border: none;
  border-radius: 30px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
  transition: all 0.3s ease;
}

#preBuyButton:hover {
  background: linear-gradient(145deg, #ffcc00, #ffaa00);
  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
  transform: scale(1.05);
}

    .stylish-button {
  background: linear-gradient(145deg, #ffd700, #ffb700);
  color: #000;
  font-size: 16px;
  font-weight: bold;
  padding: 12px 24px;
  border: none;
  border-radius: 30px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.3);
  transition: all 0.3s ease;
}

.stylish-button:hover {
  background: linear-gradient(145deg, #ffcc00, #ffaa00);
  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
  transform: scale(1.05);
}
    .token-row .label {
  font-weight: 600;
  color: #ffd700;
}
    .token-row.highlight {
  background: rgba(255, 215, 0, 0.08);
  border-left: 4px solid #ffd700;
  padding-left: 10px;
}

    .roadmap-timeline {
  margin: 60px auto;
  padding: 20px;
  max-width: 600px;
  border-left: 3px solid #ffd700;
  position: relative;
}

.timeline-item {
  padding: 12px 20px;
  position: relative;
}

.timeline-item::before {
  content: "";
  position: absolute;
  top: 20px;
  left: -9px;
  width: 14px;
  height: 14px;
  background: #ffd700;
  border-radius: 50%;
  border: 2px solid #111;
  box-shadow: 0 0 6px rgba(255, 215, 0, 0.5);
}

.timeline-date {
  font-weight: bold;
  color: #ffd700;
  margin-bottom: 6px;
}

.timeline-content {
  color: #fff;
  font-size: 15px;
}
    .timeline-item::before {
  content: "";
  position: absolute;
  top: 20px;
  left: -9px;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  border: 2px solid #111;
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.1);
}

.timeline-item[data-status="done"]::before {
  background: #4CAF50;
  box-shadow: 0 0 6px rgba(76, 175, 80, 0.6);
}

.timeline-item[data-status="current"]::before {
  background: #FFD700;
  box-shadow: 0 0 6px rgba(255, 215, 0, 0.8);
}

.timeline-item[data-status="upcoming"]::before {
  background: #555555;
  box-shadow: 0 0 6px rgba(100, 100, 100, 0.3);
}

.nft-box {
  background-color: #333; /* 기본 배경색 */
  padding: 15px;
  border-radius: 5px;
  width: 150px;
  text-align: center;
}

#bronze {
  background-color: #cd7f32; /* Bronze 배경색 */
}

#silver {
  background-color: #c0c0c0; /* Silver 배경색 */
}

#gold {
  background-color: #ffd700; /* Gold 배경색 */
}

  

.nav-menu {
  display: flex;
  flex-wrap: wrap;              /* 여러 줄 가능 */
  justify-content: center;      /* ← 핵심: 가운데 정렬 */
  align-items: center;
  list-style: none;
  margin: 0 auto;               /* ← 가운데 정렬 보조 */
  padding: 10px 10px;
  gap: 16px;                    /* 항목 사이 간격 */
}


    .nav-menu li a {
      color: gold;
      text-decoration: none;
      font-weight: bold;
      font-size: 15px;
      letter-spacing: 1px;
      position: relative;
      transition: color 0.3s ease-in-out;
    }

    .nav-menu li a::after {
      content: '';
      position: absolute;
      width: 0%;
      height: 2px;
      background: gold;
      left: 0;
      bottom: -5px;
      transition: 0.3s ease;
    }

    .nav-menu li a:hover {
      color: #ffd700;
    }

    .nav-menu li a:hover::after {
      width: 100%;
    }

  @media screen and (max-width: 768px) {
  .nav-menu {
    justify-content: center;
    flex-wrap: wrap;
    gap: 12px;
    padding: 12px 0;
  }
}
  </style>

  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  
</head>
  
<body>
  <nav class="navbar">
  <ul class="nav-menu">
    <li><a href="#presale">PRESALE</a></li>
    <li><a href="#token">TOKEN INFO</a></li>
    <li><a href="#roadmap">ROADMAP</a></li>
    <li><a href="#utility">UTILITY</a></li>
    <li><a href="#rareairdrop">AIRDROP</a></li>
    <li><a href="#nft">NFT</a></li>
    <li><a href="#community">COMMUNITY</a></li>
    <li><a href="#dev">DEVELOPER INFO</a></li>
    <li><a href="#contact">CONTACT</a></li>
  </ul>
</nav>




<header>
  <img class="logo" src="logo_1.png" alt="STCT Logo">
  <p class="slogan">
    All workers around the world should be compensated for their labor. <br>
    <strong style="color: #fff;">STCT will be there to compensate them.</strong><br><br>
    We will pay this to all workers around the world. And we will work harder.<br><br>
    The IPO of companies will grow and the GDP will grow. We will work to make it happen.<br>
    <strong style="color: #ffcc00;">The plan is already in place.</strong>
  </p>
</header>

<div class="buy-box">
  <h3>[1BNB]=20,000,000</h3>
  <input type="number" id="buyBnbAmount" placeholder="Enter BNB amount to purchase">
  <div id="buyStctResult">Estimated STCT: 0</div>
  <button id="buyButton" class="stylish-button">Time left until purchase: Calculating...</button>
</div>

<div style="text-align:center; margin-top: 30px;">
<a id="connectWalletBtn" title="Connect Wallet"
   style="
     position: fixed;
     top: 100px;
     right: 20px;
     width: 48px;
     height: 48px;
     border-radius: 50%;
     background: #ffffff;
     box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
     padding: 10px;
     transition: transform 0.3s ease, background 0.3s ease;
     z-index: 9999;
   cursor: pointer;
   ">
  <img src="metamask2.png" alt="MetaMask"
       style="width: 100%; height: 100%; border-radius: 50%;">
</a>
</div>

<div id="presale" class="presale-banner">
  <div class="presale-badge">LIMITED PRE-SALE OFFER</div>
  <div class="presale-headline">1 BNB = 100,000,000 STCT</div>
  <div class="presale-tagline">Seize the moment. The future of labor value begins <strong>now</strong>.</div>
  <div class="presale-countdown" id="presaleCountdown">Loading...</div>
</div>

<div class="buy-box" style="border: 2px solid #ffd700;">
  <h3>STCT Presale</h3>
  <p style="font-size: 14px; color: #aaa;">* Please connect to your PC.</p>
  <p style="font-size: 14px; color: #aaa;">* The total presale amount is limited to 1000 BNB.</p>
  <p style="font-size: 14px; color: #aaa;">* The maximum purchase per person is 2 BNB.</p>
  <div id="presaleSummary" style="font-size: 14px; color: #ffd700; margin: 5px 0;">Total Sold: 0 / 1000 BNB</div>
  <div style="background: #333; border-radius: 8px; height: 10px; width: 100%; margin-bottom: 10px; overflow: hidden;">
    <div id="presaleBar" style="height: 100%; width: 0%; background: #ffd700;"></div>
  </div>
  <input type="number" id="preBnbAmount" placeholder="Enter BNB amount (Max 2)">
  <div id="preStctResult">Estimated STCT: 0</div>

<div id="walletStatus" style="
  margin-top: 6px;
  color: #ff7070;
  font-size: 0.9rem;
">
  🦊 Please connect your MetaMask wallet
</div>

<button id="preBuyButton" class="stylish-button">
  Execute Presale Purchase
</button>

<div id="walletAddressDisplay" style="
  margin-top: 10px;
  font-size: 0.95rem;
  color: gold;
  background-color: rgba(255,255,255,0.05);
  padding: 6px 12px;
  border-radius: 8px;
  display: inline-block;
">
  Wallet Address
</div>
</div>

<!-- 기존 메타마스크 버튼 아래에 추가 -->
<div style="text-align:center; margin-top: 10px;">
  <div id="balanceDisplay" style="
    font-size: 1rem;
    color: #00ffc8;
    background-color: rgba(255,255,255,0.05);
    padding: 8px 16px;
    border-radius: 10px;
    display: inline-block;
  ">
    STCT Balance: Loading...
  </div>
</div>


<div id="preorder-lockup-container">
  <h2>Pre-order and lock-up system</h2>
  <p>After pre-purchase, the purchased STCT tokens will be locked for a certain period of time.</p>
  <p> After the lock-up period ends, a certain percentage will be automatically released.</p>
  <div style="display: flex; justify-content: center; gap: 20px;">
<div style="background: #333; padding: 10px; border-radius: 5px; width: 150px;">
  <h3>Immediate Payment</h3>
  <p>30%</p>
</div>
<div style="background: #333; padding: 10px; border-radius: 5px; width: 150px;">
  <h3>After 2 Months</h3>
  <p>20%</p>
</div>
<div style="background: #333; padding: 10px; border-radius: 5px; width: 150px;">
  <h3>After 4 Months</h3>
  <p>20%</p>
</div>
<div style="background: #333; padding: 10px; border-radius: 5px; width: 150px;">
  <h3>After 6 Months</h3>
  <p>30%</p>
</div>
  </div>
</div>
  
<div class="buy-box" style="margin-top: 40px;">
  <h3>🔒 STCT Lock-up & Claim</h3>

  <button onclick="loadClaimableLockup()" class="stylish-button" style="margin-top: 12px;">
    🔍 Check Lock-up Amount
  </button>

  <div id="claimableInfo" style="margin-top: 10px; color: #00ffc8;">
    Loading your lock-up data...
  </div>

  <button onclick="claimLockedTokens()" class="stylish-button" style="margin-top: 16px;">
    💸 Claim STCT
  </button>
</div>

 
  
<h3 style="color: gold;">Recent Purchasers (Latest 10)</h3>
<table style="width: 100%; color: white; font-size: 14px; border-collapse: collapse;">
  <thead>
    <tr style="color: gold; border-bottom: 1px solid #444;">
      <th>Address</th>
      <th>BNB</th>
      <th>STCT</th>
      <th>Time</th>
    </tr>
  </thead>

  <tbody id="purchaseTableBody">
    <!-- JavaScript로 자동 표시 -->
  </tbody>
</table>

  <div id="Pre-sale NFT">
  <h2>Pre-sale NFT Distribution Event</h2>
  <p>Special NFTs can be received based on cumulative purchases. Check the criteria below and receive higher-tier NFTs!</p>
  
 <div style="display: flex; justify-content: center; gap: 20px;">
  <div class="nft-box" id="bronze">
    <h3>Bronze NFT</h3>
    <p>Purchase between 0.3 BNB ~ 0.8 BNB</p>
    <p>[Staking Interest 0.3%]</p>
  </div>
  <div class="nft-box" id="silver">
    <h3>Silver NFT</h3>
    <p>Purchase between 0.81 BNB ~ 1.5 BNB</p>
    <p>[Staking Interest 1%]</p>
  </div>
  <div class="nft-box" id="gold">
    <h3>Gold NFT</h3>
    <p>Purchase between 1.51 BNB ~ 2 BNB</p>
    <p>[Staking Interest 1.5%]</p>
  </div>
</div>
  <div style="text-align: center; margin-top: 20px;">
    <button class="upgrade-button" style="background-color: #ffd700; color: black; padding: 10px 20px; border-radius: 8px;">Upgrade NFT</button>
  </div>
</div>

  <div class="nft-introduction">
  <h2>PRE-ORDER NFT-GOLD</h2>
  <p>[Staking Interest 1.5%]</p>
  <img src="gold.png" alt="NFT image" style="max-width: 300px; height: auto; border-radius: 10px; margin-top: 5px;">
    <h2>PRE-ORDER NFT-SILVER</h2>
<p>[Staking Interest 1%]</p>
    <img src="silver.png" alt="NFT image" style="max-width: 300px; height: auto; border-radius: 10px; margin-top: 5px;">
     <h2>PRE-ORDER NFT-BRONZE</h2>
    <p>[Staking Interest 0.3%]</p>
<img src="bronze.png" alt="NFT image" style="max-width: 300px; height: auto; border-radius: 10px; margin-top: 5px;">
</div>
  </div>
  
</div>
  
  <!-- 💰 사전판매금액 분배 구조 인포그래픽 -->
<div style="text-align:center; margin-top: 40px;">
  <img src="presale_allocation2.png" alt="Presale Fund Allocation"
       style="width: 480px; max-width: 90%; height: auto; border-radius: 16px; box-shadow: 0 0 30px rgba(255, 215, 0, 0.1);">
</div>

<div id="token" class="token-info-box">
  <h2>TOKEN INFORMATION</h2>
  <div class="token-card">
    <div class="token-row">
      <span class="label">Total Supply</span>
      <span class="value">1,000,000,000,000,000 <span class="unit"></span></span>
    </div>
    <div class="token-row">
      <span class="label">Symbol</span>
      <span class="value">STCT</span>
    </div>
    <div class="token-row">
      <span class="label">Features</span>
      <span class="value">🔥 Burn, 📥 Staking, 🔒 Lock-up, 🎁 Airdrop</span>
    </div>
    <div class="token-row">
      <span class="label">Network</span>
      <span class="value">🌐 Binance Smart Chain (BSC)</span>
    </div>
  </div>
</div>
</div>
<div class="token-info-box" id="roadmap">
  <h2>🚀 ROADMAP</h2>

<div class="roadmap-timeline">
  <div class="timeline-item" data-status="done">
    <div class="timeline-date">Q1 2025</div>
    <div class="timeline-content">Team Formation and Token Planning</div>
  </div>
  <div class="timeline-item" data-status="done">
    <div class="timeline-date">Q2 2025</div>
    <div class="timeline-content">Website Launch, Wallet Integration</div>
  </div>
  <div class="timeline-item" data-status="current">
    <div class="timeline-date">Q3 2025</div>
    <div class="timeline-content">Presale, DEX Listing, Lock-up System Implementation, Airdrop Recruitment</div>
  </div>
  <div class="timeline-item" data-status="upcoming">
    <div class="timeline-date">Q4 2025</div>
    <div class="timeline-content">First Token Burn, Global Partnerships & Community Expansion, Airdrop</div>
  </div>
  <div class="timeline-item" data-status="upcoming">
    <div class="timeline-date">Q1 2026</div>
    <div class="timeline-content">Mobile App Launch, User Expansion, Corporate Consultant Execution</div>
  </div>
  <div class="timeline-item" data-status="upcoming">
    <div class="timeline-date">Q2 2026</div>
    <div class="timeline-content">CEX Listing, Platform Integration, Global Expansion</div>
  </div>
  <div class="timeline-item" data-status="upcoming">
    <div class="timeline-date">Q3 2026</div>
    <div class="timeline-content">Additional Burn & Content Development</div>
  </div>
</div>



  
  <script>
    
    let totalPresale = 0;
let prePurchased = 0;
const maxPresaleTotal = 1000;
    
  const buyInput = document.getElementById('buyBnbAmount');
const buyOutput = document.getElementById('buyStctResult');
const buyButton = document.getElementById('buyButton');
  
buyInput.addEventListener('input', () => {
  const bnb = parseFloat(buyInput.value) || 0;
  const stct = bnb * 20000000;
  buyOutput.textContent = `Estimated STCT: ${stct.toLocaleString()} STCT`;
});

const swapTarget = new Date();
swapTarget.setDate(swapTarget.getDate() + 30);
const buyTarget = new Date(swapTarget);

function updateCountdown(button, targetDate, label) {
  const now = new Date();  // 현재 시간
 const diff = targetDate - now;  // 목표 시간과 현재 시간 차이 계산

  if (diff <= 0) {
    button.textContent = label;  // 목표 시간이 지나면 버튼 텍스트 변경
    return true;
  } else {
    const d = Math.floor(diff / (1000 * 60 * 60 * 24));  // 남은 일수 계산
    const h = Math.floor((diff / (1000 * 60 * 60)) % 24);  // 남은 시간 계산
    const m = Math.floor((diff / (1000 * 60)) % 60);  // 남은 분 계산
    const s = Math.floor((diff / 1000) % 60);  // 남은 초 계산

    // 버튼 텍스트 업데이트
    button.textContent = `${label} starts in: ${d}d ${h}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    return false;
  }
}

setInterval(() => {
  updateCountdown(buyButton, buyTarget, 'Token Purchase');
}, 1000);

buyButton.addEventListener('click', () => {
  if (updateCountdown(buyButton, buyTarget, 'Token Purchase')) {
    alert('Token purchase feature will be integrated soon.');
  } else {
    alert('Purchasing is currently unavailable.');
  }
});


  // 사전구매
  const preInput = document.getElementById('preBnbAmount');
  const preOutput = document.getElementById('preStctResult');
  const preButton = document.getElementById('preBuyButton');



function updatePresaleUI() {
  const percent = (totalPresale / maxPresaleTotal) * 100;
  document.getElementById("presaleSummary").textContent = `Total Sold: ${totalPresale.toFixed(6)} / ${maxPresaleTotal} BNB`;
  document.getElementById("presaleBar").style.width = `${Math.min(percent, 100)}%`;
}

preInput.addEventListener('input', () => {
  const bnb = parseFloat(preInput.value) || 0;
  const available = maxPresaleTotal - totalPresale;
  if (bnb > 2 || prePurchased + bnb > 2 || bnb > available) {
    preOutput.textContent = `You have exceeded the individual or total limit. Remaining total limit: ${available.toFixed(6)} BNB`;
    preButton.disabled = true;
    return;
  }
  const stct = bnb * 100000000;
  preOutput.textContent = `Estimated STCT: ${stct.toLocaleString()} STCT`;
  preButton.disabled = false;
});

preButton.addEventListener('click', async () => {
  const bnb = parseFloat(preInput.value) || 0;
  const available = maxPresaleTotal - totalPresale;

  if (!currentAccount) {
    alert("Please connect your wallet first.");
    return;
  }
  if (bnb <= 0) {
    alert("Please enter the amount of BNB.");
    return;
  }
  if (bnb > available) {
    alert(`Presale limit exceeded. Remaining amount: ${available.toFixed(6)} BNB`);
    return;
  }
  if (prePurchased + bnb > 2) {
    alert("You have exceeded the individual purchase limit of 2 BNB.");
    return;
  }


  try {
    // ✅ 실제 결제
    const tx = await window.ethereum.request({
      method: 'eth_sendTransaction',
      params: [{
        from: currentAccount,
        to: '0xD39a97353dCab50bEF1bDD02d9d50b73A3A3E173',
        value: '0x' + (bnb * 1e18).toString(16),
      }],
    });

    alert('Pre-order transaction sent successfully! TX: ' + tx);

    // ✅ 시트 전송 데이터 구성
    const totalStct = bnb * 100000000;
    const lockup = {
      immediate: Math.floor(totalStct * 0.3),
      after2m: Math.floor(totalStct * 0.2),
      after4m: Math.floor(totalStct * 0.2),
      after6m: totalStct - Math.floor(totalStct * 0.3) - Math.floor(totalStct * 0.2) * 2
    };

    // ✅ Google Sheet에 기록 (중복 X)
    await fetch("https://my-proxy-app-murex.vercel.app/api/send", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        address: currentAccount,
        bnb: bnb,
        stct: totalStct,
        timestamp: new Date().toLocaleString("en-US"),
        immediate: lockup.immediate,
        after2m: lockup.after2m,
        after4m: lockup.after4m,
        after6m: lockup.after6m
      })
    }).then(res => res.text())
      .then(result => console.log("✅ Google Sheet 기록 성공:", result))
      .catch(err => console.error("❌ Google Sheet 기록 실패:", err));

    // ✅ UI 처리
    prePurchased += bnb;
    totalPresale += bnb;
    localStorage.setItem("preBuyTotal", prePurchased.toString());
    localStorage.setItem("preBuyTotalGlobal", totalPresale.toString());
    preInput.value = '';
    preOutput.textContent = '';
    preButton.disabled = prePurchased >= 2 || totalPresale >= maxPresaleTotal;

    updatePresaleUI();
    handlePresalePurchase();   // 최근 구매자 목록 반영
    updateTotalPresale();     // 총 판매량 fetch 갱신

alert(`Presale completed! Your total: ${prePurchased.toFixed(6)} BNB / Total sold: ${totalPresale.toFixed(6)} BNB`);


  } catch (error) {
    console.error(error);
alert('The transaction was either cancelled or failed.');
  }
});



  const presaleCountdownEl = document.getElementById("presaleCountdown");
  const presaleEndTime = new Date("2025-05-22T00:00:00Z").getTime();  // 마감일 수정 가능

  function updatePresaleCountdown() {
    const now = new Date().getTime();
    const diff = presaleEndTime - now;

    if (diff <= 0) {
      presaleCountdownEl.innerText = "SALE ENDED";
      return;
    }

    const d = Math.floor(diff / (1000 * 60 * 60 * 24));
    const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const m = Math.floor((diff / (1000 * 60)) % 60);
    const s = Math.floor((diff / 1000) % 60);

presaleCountdownEl.innerText = `${d} days ${h} hours ${m} minutes ${s} seconds`;
  }

  setInterval(updatePresaleCountdown, 1000);
  updatePresaleCountdown();





  
let currentAccount = null;

const connectWalletBtn = document.getElementById('connectWalletBtn');

async function connectWallet() {
  if (!window.ethereum) {
    alert('METAMASK is not installed.');
    return;
  }

  try {
    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
    const account = accounts[0];
    currentAccount = account;
    const shortened = account.slice(0, 6) + '...' + account.slice(-4);

    connectWalletBtn.title = "Connected: " + shortened;
    connectWalletBtn.style.background = '#00ffc8';
    connectWalletBtn.style.boxShadow = '0 0 12px rgba(0, 255, 200, 0.4)';
       displayWalletAddress(account);
  } catch (err) {
    console.error(err);
alert('Wallet connection failed or was rejected');

  }
}

connectWalletBtn.addEventListener('click', connectWallet);

function displayWalletAddress(address) {
  const short = address.slice(0, 6) + '...' + address.slice(-4);
  document.getElementById('walletAddressDisplay').innerText = ' ' + short;

  // 연결 상태 안내 문구
  document.getElementById('walletStatus').innerText = '✅ Wallet connected';
  document.getElementById('walletStatus').style.color = '#00ffc8';
}

document.addEventListener("DOMContentLoaded", function () {
 

  if (window.ethereum && window.ethereum.selectedAddress) {
    currentAccount = window.ethereum.selectedAddress;
    displayWalletAddress(currentAccount);
  } else {
    document.getElementById('walletStatus').innerText = 'Please connect your METAMASK wallet.';
    document.getElementById('walletStatus').style.color = '#ff7070';
  }
});

      async function updateTotalPresale() {
  try {
    const res = await fetch("https://my-proxy-app-murex.vercel.app/api/send");
    const json = await res.json();

    const total = parseFloat(json.total || 0);
    totalPresale = total;

   document.getElementById("presaleSummary").textContent = `Total Sold: ${total.toFixed(6)} / 1000 BNB`;

const percent = (total / maxPresaleTotal) * 100;
document.getElementById("presaleBar").style.width = `${Math.min(percent, 100)}%`;
} catch (err) {
  console.error("Failed to fetch total presale amount", err);
}

  }
      async function fetchPurchaseLogFromSheet() {
  try {
    const res = await fetch("https://my-proxy-app-murex.vercel.app/api/send");
    const json = await res.json();

    if (!Array.isArray(json.records)) return;

    const tableBody = document.getElementById("purchaseTableBody");
    tableBody.innerHTML = "";

    json.records.slice(0, 10).reverse().forEach(log => {
      const row = `<tr>
        <td>${log.address.slice(0, 6)}...${log.address.slice(-4)}</td>
        <td>${parseFloat(log.bnb).toFixed(2)}</td>
        <td>${parseInt(log.stct).toLocaleString()}</td>
        <td>${log.timestamp}</td>
      </tr>`;
      tableBody.innerHTML += row;
    });
  } catch (err) {
console.error("❌ Failed to load recent buyers:", err);

  }
}

document.addEventListener("DOMContentLoaded", fetchPurchaseLogFromSheet);



 

  const STCT_ADDRESS = "0x338a59DBFe304a05370164c23015F203B0a8b8A2";
  const STCT_ABI = [
    {
      "constant": true,
      "inputs": [{ "name": "owner", "type": "address" }],
      "name": "balanceOf",
      "outputs": [{ "name": "", "type": "uint256" }],
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "decimals",
      "outputs": [{ "name": "", "type": "uint8" }],
      "type": "function"
    }
  ];

  async function loadSTCTBalance() {
    if (!window.ethereum || !currentAccount) return;

    const provider = new ethers.providers.Web3Provider(window.ethereum);
    const contract = new ethers.Contract(STCT_ADDRESS, STCT_ABI, provider);

    try {
      const balanceRaw = await contract.balanceOf(currentAccount);
      const decimals = await contract.decimals();
      const balance = ethers.utils.formatUnits(balanceRaw, decimals);

      document.getElementById("balanceDisplay").innerText = `STCT Balance: ${parseFloat(balance).toLocaleString()} STCT`;
    } catch (err) {
      console.error("Failed to load STCT balance", err);
      document.getElementById("balanceDisplay").innerText = "STCT Balance: Error";
    }
  }

  // 지갑 연결 이후 자동 호출
  connectWalletBtn.addEventListener('click', async () => {
    await connectWallet();
    loadSTCTBalance();
  });

  // 페이지 로드시 자동 실행 (이미 연결된 경우)
  document.addEventListener("DOMContentLoaded", () => {
    if (window.ethereum && window.ethereum.selectedAddress) {
      currentAccount = window.ethereum.selectedAddress;
      displayWalletAddress(currentAccount);
      loadSTCTBalance();
    }
  });

      const CONTRACT_ADDRESS = "0xD39a97353dCab50bEF1bDD02d9d50b73A3A3E173";
  const ABI = [
  {
    "inputs": [
      { "internalType": "address", "name": "_token", "type": "address" },
      { "internalType": "address", "name": "_nft", "type": "address" }
    ],
    "stateMutability": "nonpayable",
    "type": "constructor"
  },
  {
    "stateMutability": "payable",
    "type": "receive"
  },
  {
    "inputs": [],
    "name": "claim",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [
      { "internalType": "address", "name": "user", "type": "address" }
    ],
    "name": "getClaimable",
    "outputs": [
      { "internalType": "uint256", "name": "claimableAmount", "type": "uint256" },
      { "internalType": "uint256", "name": "nextUnlockTime", "type": "uint256" },
      { "internalType": "uint256", "name": "totalRemaining", "type": "uint256" }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "nft",
    "outputs": [{ "internalType": "contract INFT", "name": "", "type": "address" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "owner",
    "outputs": [{ "internalType": "address", "name": "", "type": "address" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [
      { "internalType": "address", "name": "", "type": "address" }
    ],
    "name": "purchasedBNB",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "RATE",
    "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "token",
    "outputs": [{ "internalType": "contract IERC20", "name": "", "type": "address" }],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "withdrawBNB",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "withdrawTokens",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
;


const SALE_AND_LOCK_ADDRESS = "0xD39a97353dCab50bEF1bDD02d9d50b73A3A3E173"; // 중간관리자 주소
const SALE_AND_LOCK_ABI = [
  {
    "inputs": [{ "internalType": "address", "name": "user", "type": "address" }],
    "name": "getClaimable",
    "outputs": [
      { "internalType": "uint256", "name": "claimableAmount", "type": "uint256" },
      { "internalType": "uint256", "name": "nextUnlockTime", "type": "uint256" },
      { "internalType": "uint256", "name": "totalRemaining", "type": "uint256" }
    ],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [],
    "name": "claim",
    "outputs": [],
    "stateMutability": "nonpayable",
    "type": "function"
  }
];

// 락업 정보 자동 로딩 함수
async function loadClaimableLockup() {
  if (!window.ethereum || !window.ethereum.selectedAddress) {
    document.getElementById("claimableInfo").innerText = "🦊 Please connect your wallet first.";
    return;
  }

  currentAccount = window.ethereum.selectedAddress;
  const provider = new ethers.providers.Web3Provider(window.ethereum);
  const contract = new ethers.Contract(SALE_AND_LOCK_ADDRESS, SALE_AND_LOCK_ABI, provider);

  try {
    const [amount, nextUnlock, remaining] = await contract.getClaimable(currentAccount);

    const claimable = parseFloat(ethers.utils.formatUnits(amount, 18)).toFixed(2);
    const remainingStct = parseFloat(ethers.utils.formatUnits(remaining, 18)).toFixed(2);
    const unlockDate = nextUnlock > 0 ? new Date(nextUnlock * 1000).toLocaleString() : "✅ Unlocked";

    document.getElementById("claimableInfo").innerHTML = `
      ✅ Claimable: ${claimable} STCT<br>
      ⏰ Next Unlock: ${unlockDate}<br>
      🧾 Remaining: ${remainingStct} STCT
    `;
  } catch (err) {
    console.error("❌ Failed to load claimable info", err);
    document.getElementById("claimableInfo").innerText = "❌ Failed to load lock-up data.";
  }
}

async function claimLockedTokens() {
  if (!window.ethereum || !window.ethereum.selectedAddress) {
    alert("Please connect your wallet first.");
    return;
  }

  const provider = new ethers.providers.Web3Provider(window.ethereum);
  const signer = provider.getSigner();
  const contract = new ethers.Contract(SALE_AND_LOCK_ADDRESS, SALE_AND_LOCK_ABI, signer);

  try {
    const tx = await contract.claim();
    await tx.wait();
    alert("✅ Claim successful!");

    // 갱신
    await loadClaimableLockup();
  } catch (err) {
    console.error("❌ Claim failed", err);
    alert("❌ Claim failed or cancelled.");
  }
}

    const ownerAddress = "0x09C32FBb84773288C21a79B3A7666bDE4C93A01E"; // 이곳에 실제 owner 지갑주소 입력

async function checkIfAdmin() {
  if (!currentAccount) return;
  if (currentAccount.toLowerCase() === ownerAddress.toLowerCase()) {
    document.getElementById("adminControls").style.display = "block";
  }
}


      
document.addEventListener("DOMContentLoaded", () => {
  if (window.ethereum && window.ethereum.selectedAddress) {
    currentAccount = window.ethereum.selectedAddress;
    displayWalletAddress(currentAccount);
    loadSTCTBalance();
   
    loadClaimableLockup();
  }

  updateTotalPresale();
  fetchPurchaseLogFromSheet();
});


    
</script></body>
</html>

